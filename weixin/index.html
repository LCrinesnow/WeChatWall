<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Wx client</title>
    <!--<style type="text/css">-->
    <!--li > img {-->
    <!--width: 32px;-->
    <!--}-->

    <!--</style>-->
    <link rel="stylesheet" href="/assets/css/bootstrap.css"/>
    <link rel="stylesheet" href="/assets/css/font-awesome.css"/>
    <link rel="stylesheet" href="/assets/css/ace.css" class="ace-main-stylesheet" id="main-ace-style"/>
</head>
<body>
<div class="row">
    <div class="col-xs-12 col-sm-8 col-sm-offset-2">
        <h1 class="header blue lighter">
            WeChat Wall
        </h1>
    </div>
</div>


<ul id="messages">

</ul>


<script type="text/javascript">
    var msglist = document.getElementById('messages');
    var ws = new WebSocket('ws://123.206.68.248:9531/');
    //ws://h5jun.com:10001/
    ws.onmessage = function (evt) {
        console.log(evt.data);
        var msg = JSON.parse(evt.data);
        var content = msg.xml.Content[0];
        msg.user = msg.user || {};
        var userName = msg.user.nickname;
        var headimg = msg.user.headimgurl;

        var oLi = document.createElement('li');
//    oLi.innerHTML = userName + '<img src="'+headimg+'">' + 'è¯´:' + content;
        oLi.innerHTML = '<div class="row">'+
                        '<div class="col-xs-12 col-sm-8 col-sm-offset-2">'+
                '<div class="itemdiv dialogdiv">'+
                '<div class="user">' +
                '<img  src="' + headimg + '" /></div>' +
                '<div class="body">' +
                '<div class="name">' +
                '<a href="#">' + userName + '</a></div>' +
                '<div class="text">' + content + '</div></div></div></div></div>';
        msglist.appendChild(oLi);
    };
</script>
</body>
</html>